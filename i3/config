# 设置功能键为Mod1（Alt)
set $mod Mod1

# 设置新窗口像素
new_window pixel 4

# 新的浮动标准
new_float normal

# 隐藏边框
hide_edge_borders none

# 字体等宽大小
font xft:monospace 16

# 浮动修改器
floating_modifier $mod

# 限制浮动窗口大小
floating_minimum_size 75 x 50
floating_maximum_size 1280 x 800

## 快捷键设置 ##

# 打开终端
bindsym $mod+Return exec alacritty

# 设置边框快捷键
bindsym $mod+u border none
bindsym $mod+y border pixel 4
bindsym $mod+n border normal

# 打开ranger文件管理器
bindsym $mod+d exec alacritty -e ranger

# 谷歌浏览器
bindsym $mod+Control+g exec google-chrome-stable

# 调节亮度
bindcode 232 exec xbacklight -dec 10
bindcode 233 exec xbacklight -inc 10

# 调节声音
bindsym XF86AudioMute exec pulseaudio-ctl mute
bindsym XF86AudioRaiseVolume exec pulseaudio-ctl up
bindsym XF86AudioLowerVolume exec pulseaudio-ctl down

# 火狐浏览器
bindsym $mod+Control+f exec firefox

# 截图工具
bindsym $mod+Control+z exec flameshot gui

# 打开网易云音乐
bindsym $mod+Control+4 exec netease-cloud-music

# ssr
bindsym $mod+Shift+s exec electron-ssr

# chromium
bindsym $mod+m exec chromium

# 打开视频播放器
bindsym $mod+p exec smplayer

# 锁屏
bindsym mod4+l exec i3lock && systemctl suspend

# xfce4的程序查找器
bindsym mod4+e exec --no-startup-id xfce4-appfinder

# Window kill command 杀死窗口
bindsym $mod++q kill

# split orientation 垂直分屏开关
bindsym $mod+v split toggle

# toggle fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+z focus mode_toggle

# toggle sticky
bindsym mod4+s sticky toggle

# focus the parent container 多选窗口
bindsym $mod+a focus parent

# move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show


## Autostart applications ##
# 修改键位
exec_always xmodmap ~/.xmodmap
# 半透明
exec_always --no-startup-id killall compton | sleep 1s && compton --config ~/.config/compton.conf
# 状态栏
exec_always --no-startup-id /$HOME/.config/polybar/launch.sh
# 分辨率
exec_always --no-startup-id xrandr --output DVI-D-1 --mode 1920x1080
# 输入法
exec_always --no-startup-id fcitx
#exec_always --no-startup-id ibus-daemon -x -d
# exec_always --no-startup-id albert
# 十分钟自动睡眠
exec --no-startup-id xset dpms 600
# 蓝牙管理工具
#exec_always --no-startup-id blueberry&

exec_always --no-startup-id syndaemon -t -k -i 2 -d

# 网络管理工具
exec_always --no-startup-id nm-applet
# 程序启动器
# exec_always /opt/uTools/utools
exec_always utools&
# 壁纸管理器
exec --no-startup-id variety
exec --no-startup-id /usr/lib/geoclue-2.0/demos/agent
# 声音系统托盘
exec_always --no-startup-id killall pasystray && pasystray

## set workspaces ##

# workspaces
set $ws1 1.Term
set $ws2 2.Code
set $ws3 3.Web
set $ws4 4.Music
set $ws5 5.Chat
set $ws6 6.Game
set $ws7 7.Study
set $ws8 8.Other

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8; workspace $ws8

# navigate workspaces next / previous
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left 
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left 50 px
bindsym $mod+Shift+Down move down 50 px
bindsym $mod+Shift+Up move up 50 px
bindsym $mod+Shift+Right move right 50 px

# workspace back and forth (with/without active container)
bindsym $mod+Shift+b move container to workspace back_and_forth; workspace back_and_forth

# 软件从特定工作区打开

assign [class="TelegramDesktop"] $ws5
assign [class="firefox"] $ws3
assign [class="Google-chrome"] $ws3
assign [class="netease-cloud-music"] $ws4
assign [class="jetbrains-clion"] $ws2
assign [class="Emacs"] $ws2
assign [class="Epdfview"] $ws7
assign [class="Alacritty"] $ws1
#assign [class="Chromium"] $ws3
assign [class="Xfce"] $ws8
assign [class="smplayer"] $ws7
assign [class="electronic-wechat"] $ws5

# Open specific applications in floating mode
for_window [title="alsamixer"] floating enable border pixel 1
for_window [class="Calamares"] floating enable border normal
for_window [class="Clipgrab"] floating enable
for_window [title="File Transfer*"] floating enable
for_window [class="Galculator"] floating enable border pixel 1
for_window [class="GParted"] floating enable border normal
for_window [title="i3_help"] floating enable sticky enable border normal
for_window [class="Lightdm-gtk-greeter-settings"] floating enable
for_window [class="Lxappearance"] floating enable sticky enable border normal
for_window [class="Manjaro-hello"] floating enable
for_window [class="Manjaro Settings Manager"] floating enable border normal
for_window [title="MuseScore: Play Panel"] floating enable
for_window [class="Nitrogen"] floating enable sticky enable border normal
for_window [class="Oblogout"] fullscreen enable
for_window [class="octopi"] floating enable
for_window [title="About Pale Moon"] floating enable
for_window [class="Pamac-manager"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="qt5ct"] floating enable sticky enable border normal
for_window [class="Qtconfig-qt4"] floating enable sticky enable border normal
for_window [class="Simple-scan"] floating enable border normal
for_window [class="(?i)System-config-printer.py"] floating enable border normal
for_window [class="Skype"] floating enable border normal
for_window [class="Thus"] floating enable border normal
for_window [class="Timeset-gui"] floating enable border normal
for_window [class="(?i)virtualbox"] floating enable border normal
for_window [class="Xfburn"] floating enable
#for_window [class="xfce4-appfinder"] floating enable

# switch to workspace with urgent window automatically
for_window [urgent=latest] focus

## set status ## 

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e mode "$exit_i3"
set $exit_i3 (y)or(enter)exit i3,(Escape)exit mode
mode "$exit_i3"{
    bindsym Escape mode "default"
    bindsym y exec i3-msg exit, mode "default"
    bindsym Return exec i3-msg exit, mode "default"
}

# Resize window (you can also use the mouse for that)
bindsym $mod+r mode "resize"
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode
        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 5 px or 5 ppt
        bindsym j resize grow height 5 px or 5 ppt
        bindsym k resize shrink height 5 px or 5 ppt
        bindsym l resize grow width 5 px or 5 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 20 px or 20 ppt
        bindsym Down resize grow height 20 px or 20 ppt
        bindsym Up resize shrink height 20 px or 20 ppt
        bindsym Right resize grow width 20 px or 20 ppt

        # exit resize mode: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}


# Theme colors
client.background #990033

# Gaps
gaps inner 10
gaps outer -4

smart_gaps on

## Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps. Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace). If you also press Shift with these keys, the change will be global for all workspaces.
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
        bindsym o      mode "$mode_gaps_outer"
        bindsym i      mode "$mode_gaps_inner"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
mode "$mode_gaps_inner" {

        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# set power-manager and volume control
exec --no-startup-id mate-power-manager

# 音量调节  不是很好用
#bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -c 0 -q set Master 2dB+ unmute
#bindsym XF86AudioLowerVolume exec --no-startup-id amixer -c 0 -q set Master 2db- unmute
#bindsym XF86AudioMute exec --no-startup-id amixer -q set Master toggle

# touchpad on and off controller on laptop with Fn+<touchpad control functional key>
bindsym XF86TouchpadOn exec --no-startup-id synclient Touchpadoff=0
bindsym XF86TouchpadOff exec --no-startup-id synclient Touchpadoff=1

#bar {
#        status_command polybar
#
#}

client.focused #d70a53 #d70a53 #ffffff #8c0333
client.focused_inactive #333333 #333333 #888888 #333333
client.unfocused #333333 #333333 #888888 #333333
client.urgent #eb709b #eb709b #ffffff #eb709b
