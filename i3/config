# 设置功能键为Mod1（Alt)
set $mod Mod4
set $toast exec notify-send -t 3000

# 设置新窗口像素
new_window pixel 4

# 新的浮动标准
new_float normal

# 隐藏边框
hide_edge_borders none

# 字体等宽大小
font xft:monospace 16

# 浮动修改器
floating_modifier $mod

# 限制浮动窗口大小
floating_minimum_size 75 x 50
floating_maximum_size -1 x 1000

## 快捷键设置 ##
# 触摸板模块重新加载
bindsym F10 exec sh ~/.i2c_hid.sh;$toast "触摸板模块重新加载"

# 打开终端
bindsym $mod+Shift+Return exec alacritty

# 设置边框快捷键
bindsym $mod+u border none;$toast "设置为无边框"
bindsym $mod+y border pixel 4;$toast "设置为4像素边框"
bindsym $mod+n border normal;$toast "设置为正常边框"

# 打开ranger文件管理器
# bindsym mod1+d exec alacritty -e ranger

# 谷歌浏览器
#bindsym $mod+Control+g exec google-chrome-stable --proxy-server="socks5://127.0.0.1:1080"

# emacs
# bindsym mod1+e exec emacsclient c -a %
bindsym mod1+e move up 150 px resize set 1200 800

# 调节亮度
bindcode 232 exec xbacklight -dec 5
bindcode 233 exec xbacklight -inc 5

# 调节声音
bindsym XF86AudioMute exec pulseaudio-ctl mute 
bindsym XF86AudioRaiseVolume exec pulseaudio-ctl up
bindsym XF86AudioLowerVolume exec pulseaudio-ctl down 

# 修改键位
bindsym mod1+Shift+x exec xmodmap ~/.Xmodmap;$toast "交换键位"

# 获取鼠标坐标
bindsym $mod+Shift+p exec python /home/yzl178me/test/python/lib/getPostion.py | xargs notify-send -t 3000

# 点击
bindsym mod1+1 exec python /home/yzl178me/test/python/auto_read_up.py;$toast "上一页"
bindsym mod1+2 exec python /home/yzl178me/test/python/auto_read.py;$toast "下一页"

# 火狐浏览器
# bindsym $mod+Control+f exec firefox

# 截图工具
bindsym $mod+Control+z exec flameshot gui
# bindsym $mod+Shift+z exec alacritty --working-directory ~/Image/flameshot;$toast "保存截图"
bindsym $mod+Shift+z exec sh /home/yzl178me/Image/flameshot/save.sh;$toast "保存截图"

# 打开网易云音乐
bindsym $mod+Control+4 exec netease-cloud-music

# ssr
# bindsym $mod+Shift+s exec electron-ssr

# chromium
bindsym $mod+m exec chromium --proxy-server="socks5://127.0.0.1:1081"

# 打开视频播放器
bindsym $mod+p exec smplayer

# MC
bindsym $mod+g exec java -jar ~/MC/HMCL-3.2.149.jar

# 屏保
bindsym Control+mod4+l exec i3lock-fancy

# 锁屏休眠
bindsym Control+mod1+s exec i3lock-fancy && systemctl hybrid-sleep
#bindsym mod4+s exec i3lock -i  && systemctl suspend

# xfce4的程序查找器
#bindsym mod4+e exec --no-startup-id xfce4-appfinder

# Window kill command 杀死窗口
bindsym $mod+q kill

# split orientation 垂直分屏开关
bindsym $mod+v split toggle;$toast "垂直水平分屏开关"

# 全屏
bindsym $mod+f fullscreen toggle

# 调整窗口模式
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# 浮动窗口
bindsym $mod+Shift+space floating toggle

# 窗口聚焦切换
bindsym $mod+space focus mode_toggle

# 即使您切换到另一个工作区，也要让它留在屏幕上
bindsym mod4+x sticky toggle;$toast "固定当前窗口"

# 隐藏窗口
bindsym $mod+equal move scratchpad;$toast "隐藏窗口"

# 呼出隐藏的窗口
bindsym $mod+minus scratchpad show;$toast "显示隐藏的窗口"


## Autostart applications ##
# 动态壁纸(有点耗电)

# 桌面通知
exec_always deadd-notification-center
# 半透明
exec_always --no-startup-id killall picom | sleep 1s && picom --config ~/.config/picom.conf
# 状态栏
exec_always --no-startup-id /$HOME/.config/polybar/launch.sh
# 分辨率
exec_always --no-startup-id xrandr --output DVI-D-1 --mode 1920x1080
# 输入法
exec_always --no-startup-id fcitx5

# 电量低提醒
exec_always --no-startup-id i3-battery-popup -L 30 -m "电量低，及时充电" -s "/home/yzl178me/Music/kgmusic/机器猫.mp3" -n

# 护眼程序
exec_always redshift-gtk -l 53:113

# 电源管理
exec --no-startup-id xfce4-power-manager

#代理
exec_always qv2ray

# 修改键位
# exec xmodmap ~/.Xmodmap
#
#exec_always --no-startup-id ibus-daemon -x -d
# exec_always --no-startup-id albert
# 十分钟自动睡眠
# exec_always --no-startup-id xset dpms 600
# 蓝牙管理工具
#exec_always --no-startup-id blueberry &

#exec_always --no-startup-id syndaemon -t -k -i 2 -d

# 网络管理工具
exec_always --no-startup-id nm-applet
# 程序启动器
# exec_always /opt/uTools/utools
exec_always utools&
# 壁纸管理器
exec --no-startup-id variety
# exec --no-startup-id /usr/lib/geoclue-2.0/demos/agent
# 声音系统托盘
# exec_always --no-startup-id killall pasystray && pasystray

## set workspaces ##

# workspaces
set $ws1 1.Term
set $ws2 2.Emacs
set $ws3 3.Web
set $ws4 4.Qt
set $ws5 5.Chat
set $ws6 6.Music
set $ws7 7.Study
set $ws8 8.Other

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8; workspace $ws8

# navigate workspaces next / previous
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left 
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left 50 px
bindsym $mod+Shift+Down move down 50 px
bindsym $mod+Shift+Up move up 50 px
bindsym $mod+Shift+Right move right 50 px

# 软件从特定工作区打开 可以通过xprop 来找class类
assign [class="Alacritty"] $ws1
assign [class="jetbrains-clion"] $ws2
assign [class="Emacs"] $ws2
assign [class="firefox"] $ws3
assign [class="Google-chrome"] $ws3
assign [class="Chromium"] $ws3
assign [title="Qt Creator"] $ws4
assign [title="Feem"] $ws4
assign [class="TelegramDesktop"] $ws5
assign [class="QQ"] $ws5
assign [class="electronic-wechat"] $ws5
assign [class="netease-cloud-music"] $ws6
assign [class="KuGou"] $ws6
assign [class="Epdfview"] $ws7
assign [title="福昕阅读器"] $ws7
assign [class="smplayer"] $ws7
assign [class="VirtualBox"] $ws8

# 特定窗口的配置
# 全屏模式下智能弹出窗口
popup_during_fullscreen smart
# 将第三个工作区设置为标签模式
for_window [class="Chromium"] layout tabbed
#workspace $ws3 stacking
# 打开窗口时不聚焦
#no_focus [class="Chromium"]
# 全局窗口
for_window [title="Cloud Music"] sticky toggle
# 自动隐藏
for_window [title="Battery Warning"] sticky enable
## 针对Qt各窗口的配置
for_window [title="Qt程序"] floating enable  resize 1000 x 500
# 以浮动模式打开
for_window [title="在线翻译"] floating enable resize 75 x 50
# for_window [title="QQ"] floating enable
for_window [title="Saladict Dict Panel"] floating enable
for_window [title="蓝牙"] floating enable
for_window [title="HMCL"] floating enable floating_minimum_size 75 x 50
for_window [title="alsamixer"] floating enable border pixel 1
for_window [class="Lightdm-gtk-greeter-settings"] floating enable
for_window [class="qt5ct"] floating enable sticky enable border normal
for_window [class="Qtconfig-qt4"] floating enable sticky enable border normal
#for_window [class="xfce4-appfinder"] floating enable

# 自动切换到具有紧急窗口的工作区
for_window [urgent=latest] focus
focus_on_window_activation smart
# focus_on_window_activation smart|urgent|focus|none

## set status ## 

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e mode "$exit_i3"
set $exit_i3 (y)or(enter)exit i3,(Escape)exit mode
mode "$exit_i3"{
    bindsym Escape mode "default"
    bindsym y exec i3-msg exit, mode "default"
    bindsym Return exec i3-msg exit, mode "default"
}

# Resize window (you can also use the mouse for that)
bindsym $mod+r mode "resize"
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode
        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 1 px or 1 ppt
        bindsym j resize grow height 1 px or 1 ppt
        bindsym k resize shrink height 1 px or 1 ppt
        bindsym l resize grow width 1 px or 1 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 20 px or 20 ppt
        bindsym Down resize grow height 20 px or 20 ppt
        bindsym Up resize shrink height 20 px or 20 ppt
        bindsym Right resize grow width 20 px or 20 ppt

        # exit resize mode: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}


# Theme colors
client.background #990033

# Gaps
gaps inner 10
gaps outer -4

smart_gaps on

## Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps. Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace). If you also press Shift with these keys, the change will be global for all workspaces.
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
        bindsym o      mode "$mode_gaps_outer"
        bindsym i      mode "$mode_gaps_inner"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
mode "$mode_gaps_inner" {

        bindsym plus  gaps inner current plus 5
        bindsym minus gaps inner current minus 5
        bindsym 0     gaps inner current set 0

        bindsym Shift+plus  gaps inner all plus 5
        bindsym Shift+minus gaps inner all minus 5
        bindsym Shift+0     gaps inner all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
        bindsym plus  gaps outer current plus 5
        bindsym minus gaps outer current minus 5
        bindsym 0     gaps outer current set 0

        bindsym Shift+plus  gaps outer all plus 5
        bindsym Shift+minus gaps outer all minus 5
        bindsym Shift+0     gaps outer all set 0

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# set power-manager and volume control
exec --no-startup-id mate-power-manager

# 音量调节  不是很好用
#bindsym XF86AudioRaiseVolume exec --no-startup-id amixer -c 0 -q set Master 2dB+ unmute
#bindsym XF86AudioLowerVolume exec --no-startup-id amixer -c 0 -q set Master 2db- unmute
#bindsym XF86AudioMute exec --no-startup-id amixer -q set Master toggle

# touchpad on and off controller on laptop with Fn+<touchpad control functional key>
bindsym XF86TouchpadOn exec --no-startup-id synclient Touchpadoff=0
bindsym XF86TouchpadOff exec --no-startup-id synclient Touchpadoff=1

#bar {
#        status_command polybar
#
#}

client.focused #d70a53 #d70a53 #ffffff #8c0333
client.focused_inactive #333333 #333333 #888888 #333333
client.unfocused #333333 #333333 #888888 #333333
client.urgent #eb709b #eb709b #ffffff #eb709b
